(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(5),i=a(7),s=a(6),l=a(8),c=a(0),o=a.n(c),u=a(11),m=a.n(u),f=(a(18),function(e){return o.a.createElement("div",{id:"page"},o.a.createElement("h1",null,"Instructions"),o.a.createElement("div",{className:"container column"},o.a.createElement("p",null,"Le but du jeu est de r\xe9ussir \xe0 jumeler les cases pour arriver au final \xe0 obtenir une case de 2048 points (ou plus)"),o.a.createElement("p",null,"Seules les cases contenant le m\xeame num\xe9ro peuvent fusionner"),o.a.createElement("p",null,"Pour y arriver, vous devez utiliser les fl\xe8ches de votre clavier"),o.a.createElement("span",{className:"button",onClick:function(){return e.global.setState({page:"selectSize"})}},"Commencer")))}),h=a(1),p=function(e){return o.a.createElement("span",{className:"size-item button",onClick:function(){return e.global.setState({page:"game",tableSize:e.index+2})}},"".concat(e.index+2," x ").concat(e.index+2))},b=function(e){return o.a.createElement("div",{id:"page"},o.a.createElement("h1",null,"Select the size of the game"),o.a.createElement("div",{className:"container inline"},Object(h.a)(Array(19)).map(function(t,a){return o.a.createElement(p,Object.assign({key:a},e,{index:a}))})))},v=a(3),d=a.n(v),g=a(9),E=a(2);var y=function(e){return Object(h.a)(Array(e.global.tableSize)).map(function(t,a){return o.a.createElement("div",{className:"square",key:a},!!e.column[a]&&o.a.createElement("span",{className:"point p".concat(e.column[a])},e.column[a]))})},S=function(e){return Object(h.a)(Array(e.global.tableSize)).map(function(t,a){return o.a.createElement("div",{className:"row",key:a},o.a.createElement(y,Object.assign({},e,{column:e.table[a]})))})},O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).Nav=function(e){var t=this;return o.a.createElement("nav",null,o.a.createElement("span",{onClick:function(){return t.setState({table:t.setInitialTable()})}},"Recommencer"),o.a.createElement("span",{onClick:function(){return t.props.global.setState({page:"selectSize"})}},"Changer le format"),o.a.createElement("span",{onClick:function(){return t.props.global.setState({page:"instructions"})}},"Instructions"))}.bind(Object(E.a)(Object(E.a)(a))),a.Popup=function(e){var t=this;return o.a.createElement("div",{className:"popup"},o.a.createElement("div",{className:"content"},o.a.createElement("h3",null,e.title),o.a.createElement("p",null,"Vous avez accumul\xe9 ".concat(this.getScrore()," points")),e.isWin&&o.a.createElement("span",{onClick:function(){return t.setState({isContinue:!0})}},"Continuer"),o.a.createElement("span",{onClick:function(){return t.props.global.setState({page:"selectSize"})}},"Changer le format"),o.a.createElement("span",{onClick:function(){return t.setState({table:t.setInitialTable()})}},"Recommencer")))}.bind(Object(E.a)(Object(E.a)(a))),a.state={table:a.setInitialTable()},document.onkeyup=a.arrowKeysHandlers.bind(Object(E.a)(Object(E.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"setInitialTable",value:function(){var e=this,t=function(){return Math.floor(Math.random()*e.props.global.tableSize)},a=Object(h.a)(Array(this.props.global.tableSize)).map(function(){return 0}),n=a.slice().map(function(){return a.slice()});return n[t()][t()]=2*(Math.floor(2*Math.random())+1),n[t()][t()]=2*(Math.floor(2*Math.random())+1),n}},{key:"getMoveParams",value:function(e){return{ArrowLeft:{isReverse:!1,isVertical:!1},ArrowRight:{isReverse:!0,isVertical:!1},ArrowUp:{isReverse:!1,isVertical:!0},ArrowDown:{isReverse:!0,isVertical:!0}}[e]}},{key:"arrowKeysHandlers",value:function(){var e=Object(g.a)(d.a.mark(function e(t){var a,n,r,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.getMoveParams(t.key)){e.next=3;break}return e.abrupt("return");case 3:return n=a.isReverse,r=a.isVertical,i=this.moveAllSquares(n,r),e.next=7,this.doAnimations(n,r);case 7:this.setState({table:i});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rotateTable",value:function(e){for(var t=this.props.global.tableSize,a=Object(h.a)(Array(t)).map(function(){return 0}),n=a.slice().map(function(){return a.slice()}),r=0;r<t;r++)for(var i=0;i<t;i++)n[r][i]=e[i][r];return n}},{key:"moveAllSquares",value:function(e,t){var a=this.state.table;t&&(a=this.rotateTable(a));var n=a.map(function(t){var a=t.filter(function(e){return 0!==e});e&&(a=a.reverse());var n=a.findIndex(function(e,t){return e===a[t+1]});n>-1&&(a[n]+=a[n+1],a.splice(n+1,1));var r=t.map(function(e,t){return a[t]||0});return e&&(r=r.reverse()),r});return t&&(n=this.rotateTable(n)),JSON.stringify(n)!==JSON.stringify(this.state.table)&&(n=this.addItemToTable(n)),n}},{key:"doAnimations",value:function(){var e=Object(g.a)(d.a.mark(function e(t,a){var n,r,i,s=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=this.props.global.tableSize,i=this.tableRef.clientWidth/this.props.global.tableSize,(a?this.rotateTable(this.state.table):this.state.table).forEach(function(e,l){e=t?e.reverse():e;for(var c=0;c<r;c++)if(e[c]){for(var o=0,u=c-1;u>=0;u--)0!==e[u]?u=-1:(o++,e[u]=e[u+1],e[u+1]=0);if(o){var m=t?r-1-c:c,f=a?m:l;m=a?l:m;var h=s.tableRef.children[f].children[m].children[0];if(h){var p=i*o,b="translate".concat(a?"Y":"X","(").concat(t?"":"-").concat(p,"px)");h.style.transform=b,h.style.transition="0.3s all ease-in-out",n.push(h)}}}}),e.next=7,new Promise(function(e){return setTimeout(function(){return e()},300)});case 7:n.forEach(function(e){e.style.transform="",e.style.transition="0s"});case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"isGameOver",value:function(){var e=this;return[this.moveAllSquares(!1,!1),this.moveAllSquares(!0,!1),this.moveAllSquares(!1,!0),this.moveAllSquares(!0,!0)].every(function(t){return JSON.stringify(e.state.table)===JSON.stringify(t)})&&!this.getNumberList().includes(0)}},{key:"addItemToTable",value:function(e){var t=[];e.forEach(function(e,a){e.forEach(function(e,n){0===e&&t.push({row:a,col:n})})}),t.length||this.setState({isGameOver:!0});var a=Math.floor(Math.random()*t.length),n=t[a],r=n.row,i=n.col;return e[r][i]=2*(Math.floor(2*Math.random())+1),e}},{key:"componentDidMount",value:function(){this.pageRef.focus(),this.setStyle()}},{key:"componentDidUpdate",value:function(){this.setStyle()}},{key:"setStyle",value:function(){this.tableRef.style.height=this.tableRef.clientWidth+"px"}},{key:"getNumberList",value:function(){return JSON.stringify(this.state.table).split("[").join("").split("]").join("").split(",")}},{key:"getScrore",value:function(){return this.getNumberList().reduce(function(e,t){return e+=Number(t)},0)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"page",className:"game-page",index:"0",ref:function(t){e.pageRef=t}},this.isGameOver()&&o.a.createElement(this.Popup,{title:"Vous avez perdu"}),this.getNumberList().includes("2048")&&!this.state.isContinue&&o.a.createElement(this.Popup,{title:"Vous Avez gagn\xe9",isWin:!0}),o.a.createElement("h1",null,"2048"),o.a.createElement(this.Nav,Object.assign({},this,this.props)),o.a.createElement("h2",null,"Score: ",o.a.createElement("span",null,this.getScrore())),o.a.createElement("div",{className:"table",style:{height:this.height},ref:function(t){e.tableRef=t}},o.a.createElement(S,Object.assign({},this.props,this.state))))}}]),t}(o.a.Component),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={page:"instructions",tableSize:null,setState:function(e){return a.setState(e)}},window.addEventListener("resize",function(){return a.forceUpdate()}),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"instructions"===this.state.page&&o.a.createElement(f,{global:this.state}),"selectSize"===this.state.page&&o.a.createElement(b,{global:this.state}),"game"===this.state.page&&o.a.createElement(O,{global:this.state}))}}]),t}(o.a.Component);m.a.render(o.a.createElement(k,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.8d1db61b.chunk.js.map